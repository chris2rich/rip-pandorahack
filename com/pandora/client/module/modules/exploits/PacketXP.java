package com.pandora.client.module.modules.exploits;

import com.pandora.client.module.Module;
import java.util.Iterator;
import net.minecraft.init.Items;
import net.minecraft.item.ItemStack;
import net.minecraft.network.play.client.CPacketPlayer.Rotation;

public class PacketXP extends Module {
   public PacketXP() {
      super("PacketXP", Module.Category.Exploits);
   }

   public void onUpdate() {
      int ArmorDurability = this.getArmorDurability();
      if (mc.field_71439_g.func_70093_af() && 0 < ArmorDurability) {
         mc.field_71439_g.field_71071_by.field_70461_c = this.findExpInHotbar();
         mc.field_71439_g.field_71174_a.func_147297_a(new Rotation(0.0F, 90.0F, true));
         mc.field_71467_ac = 0;
         mc.func_147121_ag();
      }

   }

   private int findExpInHotbar() {
      int slot = 0;

      for(int i = 0; i < 9; ++i) {
         if (mc.field_71439_g.field_71071_by.func_70301_a(i).func_77973_b() == Items.field_151062_by) {
            slot = i;
            break;
         }
      }

      return slot;
   }

   private int getArmorDurability() {
      int TotalDurability = 0;

      ItemStack itemStack;
      for(Iterator var2 = mc.field_71439_g.field_71071_by.field_70460_b.iterator(); var2.hasNext(); TotalDurability += itemStack.func_77952_i()) {
         itemStack = (ItemStack)var2.next();
      }

      return TotalDurability;
   }
}
